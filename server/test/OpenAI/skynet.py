# -*- coding: utf-8 -*- 
#### Skynet ì˜€ë˜ê²ƒ / íŒŒì¼ ì´ë¦„ ë°”ê¿”ì•¼í•¨
import json

from openai import OpenAI
#API í‚¤ 
client = OpenAI(api_key="aaaaaaaaaaaaaaaaaaaaaaaapi_keeeeeeeeeeeeeeeeeeeeeeeeeeeeey")

## í˜„ì¬ ìë£Œì˜ ë¬¸ì¥ì´ ì™„ì„±í˜•ì— ê°€ê¹Œì›Œ ë†’ì€ ë¬¸ì¥ ì™„ì„± ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ì¤‘
## ì»¤ë®¤ë‹ˆí‹°ì— ê²Œì‹œëœ ìì—°ì–´ë“¤ì´ ì œëŒ€ë¡œ ì²˜ë¦¬ ë˜ëŠ”ì§€ í™•ì¸ í•˜ë ¤ë©´ ì™„ì „íˆ ë°•ì‚´ë‚œ ë¬¸ì¥ í˜•ì‹ì˜ ê¸€ì´ë‚˜ ë¬¸ë§¥ íŒŒì•…ì´ ë¶ˆê°€ëŠ¥í•œ ìë£Œê°€ í•„ìš”
## ì´ˆì„±, meme, ì¶•ì•½ì–´ ë“± ì‚¬ì „ì  ì˜ë¯¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‹¨ì–´ ì²˜ë¦¬ í™•ì¸ í•„ìš”
## ìš•ì„¤ë¡œ ë„ë°°ëœ ìë£Œ ì²˜ë¦¬ í™•ì¸ í•„ìš”
## ë§ì€(ë‹¤ì–‘í•œ) ë°ì´í„°ê°€ í•„ìš”í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë¨

## 02/06 
## ê¸°í˜¸ ì²˜ë¦¬ë¥¼ ì˜ ëª»í•˜ëŠ”ê±¸ë¡œ ë³´ì„ (ì˜ˆë¥¼ë“¤ë©´ í™”ì‚´í‘œ)
## ê¸€ìê°€ ë³€í˜•ëœ ë‹¨ì–´ ì²˜ë¦¬ë¥¼ ëª»í•¨
## dlfjgrp Tmaus ahtdkfdkajrdma #ì´ê±° q:ã…‚, qëŠ” ã…‚ì„ ì´ë ‡ê²Œ ì•Œë ¤ì¤˜ë„ ì•ˆí•´ì¤Œ ì¸í„°ë„· ë‹¨ì–´ ì‚¬ì „ í”„ë¡¬í”„íŠ¸ ê°™ì€ê±¸ ë§Œë“¤ì–´ì„œ import í•´ì•¼ë˜ë‚˜?
## í•œê¸€ ì•”í˜¸ í•´ë…ê¸°ë¥¼ ë§Œë“¤ì–´ì•¼ ê²€ì—´ê¸°ê°€ ì™„ì„±ë ê²ƒìœ¼ë¡œ ì˜ˆìƒë¨

## 02/10
## ì˜ì–´ë¡œ ì‘ì„±ëœê±¸ ì–´ì°Œ ì²˜ë¦¬ í•´ì•¼í• ì§€ ëª¨ë¥´ê²ŸìŒ

## 02/11 (ì‹ ëŒ€í™)
## í•œê¸€ìíŒìœ¼ë¡œ ì…ë ¥ëœ ì˜ì–´ ê°™ì€ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤. í™•ì¸ì„ í•´ë´ì•¼í•©ë‹ˆë‹¤
## ì´ì œ ë‹¤ìŒì€ ì˜ì–´ ê´€ë ¨ ë¬¸ì œê¸´í•œë°.. ì´ ë¶€ë¶„ì€ ë ˆë”§ê°™ì€ë°ì„œ ê¸ì–´ì™€ì„œ í•œë²ˆí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

#gpt ì‚¬ìš© ì „ ì „ì²˜ë¦¬ í•  ë‹¨ì–´ ì°¾ê¸°
def finder(context):  
    response = client.chat.completions.create(
        #gpt ëª¨ë¸
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[

        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ë¬¸ì¥ì—ì„œ ê³ ìœ ëª…ì‚¬ë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤."},
        {"role": "user", "content": "ì˜ë¯¸ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ë‹¨ì–´ë¥¼ ê³ ìœ ëª…ì‚¬ë¡œ ì·¨ê¸‰í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ê³ ìœ ëª…ì‚¬ê°€ ì•„ë‹Œ ê²½ìš° ì‘ë‹µì— í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ contextë¡œ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "contextì—ëŠ” input, wordsê°€ ìˆìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "wordsëŠ” listì…ë‹ˆë‹¤."},
        #{"role": "user", "content": "ê³ ìœ ëª…ì‚¬ê°€ ì˜ì–´ì¸ ê²½ìš° ì•ŒíŒŒë²³ì„ ëª¨ë‘ ë¶„ë¦¬í•©ë‹ˆë‹¤. "},
        #{"role": "user", "content": "contextì—ëŠ” input, wordì™€ indexê°€ ìˆìŠµë‹ˆë‹¤."},
        #{"role": "user", "content": "inputì€ ì…ë ¥ë°›ì€ ë¬¸ì¥ wordëŠ” ê³ ìœ ëª…ì‚¬ indexëŠ” ìœ„ì¹˜ì…ë‹ˆë‹¤."},
        #{"role": "user", "content": "titleê³¼ contentì—ì„œ ê³ ìœ ëª…ì‚¬ì˜ index ìœ„ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤."},
        
        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ê³ ìœ ëª…ì‚¬ë“¤ì„ ì¶œë ¥í•©ë‹ˆë‹¤. context:{context}"}
        ]

    )
    #ê²°ê³¼
    result = response.choices[0].message.content
    
    #print(type(result))
    print(json.loads(result))
    return json.loads(result)

#ì „ì²˜ë¦¬ ì‹¤í–‰(ê¸°ë³¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì)
def pre_v1(ì›ë³¸, ì´ê±°ì´ë¦„ë­˜ë¡œí• ê¹Œ):
    #ë‚˜ì¤‘ì— dbë¡œ ëº´ì•¼ë¨
    words = {'q':'ã…‚','w':'ã…ˆ','e':'ã„·','r':'ã„±','t':'ã……','y':'ã…›','u':'ã…•','i':'ã…‘','o':'ã…','p':'ã…”','a':'ã…','s':'ã„´','d':'ã…‡','f':'ã„¹','g':'ã…','h':'ã…—','j':'ã…“','k':'ã…','l':'ã…£','z':'ã…‹','x':'ã…Œ','c':'ã…Š','v':'ã…','b':'ã… ','n':'ã…œ','m':'ã…¡',
        'ë©í•œì²­ì¸ì§€ê³µëŠ¥': 'ë©ì²­í•œì¸ê³µì§€ëŠ¥'}
    
    nouns = ì´ê±°ì´ë¦„ë­˜ë¡œí• ê¹Œ
    
    for word in nouns:
        if word in words:
            ì›ë³¸ = ì›ë³¸.replace(word, words[word])

    print(ì›ë³¸)
    return ì›ë³¸

#ì „ì²˜ë¦¬ ì‹¤í–‰(ì¸ê³µì§€ëŠ¥ì˜ í˜ì„ ì“°ë©´)
#ë‹¨ì–´ êµí™˜ê¹Œì§€ gptí•œí…Œ ë‹¤ ë§¡ê¸°ì
def pre_v2(context):
    #ë‚˜ì¤‘ì— dbë¡œ ëº´ì•¼ë¨
    words = {
        'ë©í•œì²­ì¸ì§€ê³µëŠ¥': 'ë©ì²­í•œì¸ê³µì§€ëŠ¥',
        'dkssud': 'ì•ˆë…•',
    }

    
    response = client.chat.completions.create(
        #gpt ëª¨ë¸
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[

        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ë¬¸ì¥ì—ì„œ ê³ ìœ ëª…ì‚¬ë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤."},
        {"role": "user", "content": "ì˜ë¯¸ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ë‹¨ì–´ë¥¼ ê³ ìœ ëª…ì‚¬ë¡œ ì·¨ê¸‰í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ê³ ìœ ëª…ì‚¬ê°€ ì•„ë‹Œ ê²½ìš° ì‘ë‹µì— í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ contextë¡œ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": f"ê³ ìœ ëª…ì‚¬ë¥¼ {words}ì— ë§ê²Œ ë³€í™˜í•©ë‹ˆë‹¤."},

        {"role": "user", "content": 'ì£¼ì˜ì‚¬í•­ : ì…ë ¥ëœ í…ìŠ¤íŠ¸ ì¤‘, ì˜ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°, ë¬¸ë§¥ìƒ ì˜ë¯¸ê°€ ìˆëŠ” ê²½ìš°ë©´\
                                    í•´ì„í•œ ê²°ê³¼ë¥¼ ë‚´ë³´ë‚´ë˜, ê·¸ë ‡ì§€ì•Šì€ ë¬¸ë§¥ìƒ ë‹¨ì–´ì˜ ì˜ë¯¸ê°€ ë¶ˆëª…í™•í•˜ê±°ë‚˜ ê·œì¹™ì„±ì´ ì—†ëŠ” ë°°ì—´ì˜ ë‹¨ì–´ê°™ì€ ê²½ìš°\
                                    í•œê¸€ ìíŒ ì…ë ¥ ì˜ë„ (ex: dkssud = ì•ˆë…•)ì¼ ìˆ˜ìˆìœ¼ë‹ˆ, ì´ëŸ°ì‹ìœ¼ë¡œ í•œê¸€ ë‘ë²Œì‹ ìíŒ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ë¥¼ ë³€í˜•í•˜ê³  ìë™ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.'},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ê³ ìœ ëª…ì‚¬ë“¤ì„ ë³€í™˜í•˜ì—¬ ì¶œë ¥í•©ë‹ˆë‹¤. context:{context}"}
        ]

    )
    #ê²°ê³¼
    result = response.choices[0].message.content
    
    #print(type(result))
    print(json.loads(result))
    return json.loads(result)
    
        

### íƒœê·¸ ë½‘ê¸°
### ë‚˜ì¤‘ì—

#gpt ì‚¬ìš©í•˜ê¸° (ë³¸ë¬¸)
def rework(context):
    response = client.chat.completions.create(
        #gpt ëª¨ë¸
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[

        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ë¹„ì†ì–´ë¥¼ ìœ ì‚¬í•œ ì˜ë¯¸ì˜ ë‹¨ì–´ë¡œ êµì²´í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ë°˜ë§ì„ ëª¨ë‘ ì¡´ëŒ“ë§ë¡œ êµì²´í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "í…ìŠ¤íŠ¸ì—ì„œ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ì˜ë„ ë˜ëŠ” ì˜ë¯¸ê°€ ë³€í˜•ë˜ë©´ ì•ˆë©ë‹ˆë‹¤."},
        {"role": "user", "content": "í…ìŠ¤íŠ¸ì˜ ë¶„ìœ„ê¸° ë˜í•œ íŒŒì•…í•˜ì—¬ ì˜ë¯¸ê°€ ë³€í˜•ë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "í…ìŠ¤íŠ¸ëŠ” titleê³¼ contentë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤"},
        {"role": "user", "content": "í…ìŠ¤íŠ¸ì˜ titleì€ ë¹„ì–´ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. "},
        {"role": "user", "content": "ì˜ë¯¸ë¥¼ íŒŒì•…í•  ë• titleê³¼ contentë¥¼ ëª¨ë‘ ê³ ë ¤í•©ë‹ˆë‹¤."}, #ê·¸ëƒ¥ ë”°ë¡œ í•˜ëŠ”ë“¯
        {"role": "user", "content": "í…ìŠ¤íŠ¸ì˜ titleì´ ë¹„ì–´ìˆì„ê²½ìš° contentë§Œ ê³ ë ¤í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ 'ì›ë³¸'ê³¼ 'ë³€í™˜ë¬¸', ê°•ë„ë¡œ í•©ë‹ˆë‹¤."},        
        {"role": "user", "content": "ì‘ë‹µì˜ ì›ë³¸ê³¼ ë³€í™˜ë¬¸ ë˜í•œ titleê³¼ contentë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "titleê³¼ content ëª¨ë‘ ë³€í™˜í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ê°•ë„ëŠ” ë¹„ì†ì–´ ë˜ëŠ” ìš•ì„¤ì´ í¬í•¨ëœ ê²½ìš° 2, ë¹„ì†ì–´ëŠ” í¬í•¨ë˜ë‚˜ ì•Šìœ¼ë‚˜ ìš•ì„¤ì´ ì—†ì´ ì‘ì„±ëœ ê²½ìš° 1, ë¹„ì†ì–´ ë˜ëŠ” ìš•ì„¤ì´ ì‚¬ìš©ë˜ì§€ ì•Šê³  ì‘ì„± ëœ ê²½ìš° 0ì„ ë°˜í™˜í•©ë‹ˆë‹¤"}, #ì‘ë™ì´ ì• ë§¤í•¨
        {"role": "user", "content": 'ê³ ìœ ëª…ì‚¬ëŠ” ë³€í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'},
        # {"role": "user", "content": 'ë‘˜ ì´ìƒì˜ ë‹¨ì–´ê°€ í•©ì³ì§„ ë‹¨ì–´ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê³ ìœ ëª…ì‚¬ê°€ ì•„ë‹™ë‹ˆë‹¤.'}, #ì´ìƒí•œ ë‹¨ì–´ ë¶„ë¦¬í•´ì„œ ì•Œì•„ë³´ë¼ê³  í•´ë³´ë ¤ê³  í•œê±´ë° ì•ˆë˜ëŠ”ë“¯
        # {"role": "user", "content": 'ë‘˜ ì´ìƒì˜ ë‹¨ì–´ê°€ í•©ì³ì§„ ë‹¨ì–´ëŠ” í•´ë‹¹ ë‹¨ì–´ë¥¼ ë¶„í•´í•˜ì—¬ ì–´ë–¤ ë‹¨ì–´ê°€ ì‚¬ìš©ëëŠ”ì§€ íŒŒì•…í•´ ì˜ë¯¸ê°€ ë³€í•˜ì§€ ì•Šë„ë¡ ë³€í™˜í•©ë‹ˆë‹¤.'},
        # {"role": "user", "content": 'ë³€í™˜ëœ ë¬¸ì¥ì—” ì¼ë² ìš©ì–´ê°€ ì‚¬ìš©ë˜ì–´ì„  ì•ˆë©ë‹ˆë‹¤'}, #ì´ê±° ì •ë¦¬í•´ì„œ ë‹¤ ì•Œë ¤ì¤˜ì•¼ ë˜ë‚˜..?
        {"role": "user", "content": "ë³€í™˜ëœ ë¬¸ì¥ì—” ê³µê²©ì ì¸ ë‹¨ì–´ê°€ ì ê²Œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ë‚´ìš©ì„ ë³€í™˜í•˜ì—¬ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]

    )
    #ê²°ê³¼
    result = response.choices[0].message.content
        
    print(json.loads(result))

# íŠ¸ë Œë“œ ë³€í˜• ì¤‘....
#gpt ì‚¬ìš©í•˜ê¸° (íŠ¸ë Œë“œ) /ê³µì‚¬ì¤‘
def trend(context):
    response = client.chat.completions.create(
        #gpt ëª¨ëŒˆ
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[
        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­

        # ëª©ì 
        {"role": "user", "content": "ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ë¥¼ ìš”ì•½í•´ì„œ ë°˜í™˜í•©ë‹ˆë‹¤."},

        # ì œê³µ ì •ë³´ ìš”ì•½
        {"role": "user", "content": "ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ëŠ” ì—¬ëŸ¬ê°œì˜ í…ìŠ¤íŠ¸ë¥¼ ê°€ì§„ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."},
        {"role": "user", "content": "ë¦¬ìŠ¤íŠ¸ ì•ˆì˜ í…ìŠ¤íŠ¸ëŠ” titleê³¼ contentë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "ê° í…ìŠ¤íŠ¸ ë§ˆë‹¤ titleê³¼ contentë¥¼ ì¢…í•© ë° ìš”ì•½í•´ ì£¼ì œë¥¼ ì •í•˜ê²Œ ë©ë‹ˆë‹¤."},

        # ì£¼ì œ ë¶„ì„ ë°©ë²•
        {"role": "user", "content": "í…ìŠ¤íŠ¸ë¥¼ ì½ê³  í˜„ì¬ì˜ ê¸€ ì£¼ì œ ë¶„ì•¼ë¥¼ í‚¤ì›Œë“œë¡œ ì œì‹œí•´ ì£¼ì„¸ìš”."},
        {"role": "user", "content": "í˜„ì¬ ì£¼ì œì˜ ëŒ€ë¶„ë¥˜ì— ëŒ€í•œ ì •ë³´ë¥¼ í¬í•¨ì‹œì¼œ ì£¼ì„¸ìš”. Ex) ê¸°ìˆ , ìŒì•…, ì˜ë£Œ ë“±."},
        {"role": "user", "content": "ìœ„ì—ì„œ ìš”ì•½í•œ í‚¤ì›Œë“œëŠ” Keywordë¼ëŠ” í•­ëª©ìœ¼ë¡œ í‘œì‹œë¥¼ í•´ì£¼ì„¸ìš”."},
        {"role": "user", "content": "ë‹¤ìŒë¶€í„° ë‚˜ì˜¤ëŠ” ëª…ë ¹ë“¤ì€ ìœ„ì—ì„œ ì§„í–‰í•œ í‚¤ì›Œë“œ ìš”ì•½ì´ ì•„ë‹Œ ë‚´ìš© ìš”ì•½ìœ¼ë¡œ ì§„í–‰í•´ ì£¼ì„¸ìš”. "},
        {"role": "user", "content": "ê°€ì¥ ë§ì´ ë‚˜ì˜¨ ì£¼ì œ, ê³µí†µëœ ì£¼ì œë¥¼ ë©”ì¸ ì£¼ì œë¡œ ì •í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ê·¸ ì™¸ ë§ì´ ë‚˜ì˜¨ ì£¼ì œë‚˜ ìš”ì•½í•´ ë‚˜ì˜¨ ë©”ì¸ ì£¼ì œì˜ í•˜ìœ„ ë¶„ë¥˜ ì£¼ì œë¥¼ ì„œë¸Œ ì£¼ì œë¡œ ì •í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ë©”ì¸ ì£¼ì œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ìš”ì•½ë¬¸ì„ ì‘ì„±í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ trendë¡œ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ìš”ì•½ëœ ë¬¸ì¥ì—” ê³µê²©ì ì¸ ë‹¨ì–´ê°€ ì ê²Œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ë‚´ìš©ì„ ìš”ì•½í•˜ì—¬ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]
    )

    result = response.choices[0].message.content
    print(result)

#gpt ì‚¬ìš©í•˜ê¸° (ëŒ“ê¸€) /ê³µì‚¬ì¤‘
def comment(context):
    response = client.chat.completions.create(
        #gpt ëª¨ëŒˆ
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[
        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ìš”ì•½ëœ ë¬¸ì¥ì—” ê³µê²©ì ì¸ ë‹¨ì–´ê°€ ì ê²Œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ë‚´ìš©ì„ ë³€í™˜í•˜ì—¬ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]
    )

#gpt ì‚¬ìš©í•˜ê¸° (ì§ˆë¬¸) /ê³µì‚¬ì¤‘
def autoqna(context):
    response = client.chat.completions.create(
        #gpt ëª¨ëŒˆ
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[
        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ë¬¸ì¥ì—” ê³µê²©ì ì¸ ë‹¨ì–´ê°€ ì ê²Œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— ì•Œë§ì€ ë‹µë³€ì„ ì°¾ì•„ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]
    )

##íƒœê·¸ë¥¼ ì°¾ì•„ë³´ì•„ìš” (1.ì˜ˆì‹œê¸€ 2. íƒ€ì´í‹€? ë¬¸ì¥ 1ê°œ ì´ìƒì˜ íƒœê·¸ê°€ ë‚˜ì™€ì•¼ í•¨)
def hashtag (context):
    response = client.chat.completions.create(
        #gpt ëª¨ëŒˆ
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[
        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ì£¼ì–´ì§„ ë¬¸ì¥ì—ì„œ íƒœê·¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤."},
        {"role": "user", "content": "íƒœê·¸ëŠ” ë¬¸ì¥ ì „ì²´ ë˜ëŠ” ê° ë‹¨ì–´ì—ì„œ ì¶”ì¶œí•©ë‹ˆë‹¤."},
        {"role": "user", "content": "íƒœê·¸ëŠ” ë¬¸ë§¥ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œê±¸ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ê³ ìœ ëª…ì‚¬ëŠ” ì¤‘ìš”í•œ íƒœê·¸ì¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì— ìµœì†Œ 1ê°œ ì´ìƒì˜ íƒœê·¸ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ëª¨ë“  íƒœê·¸ëŠ” ëª…ì‚¬ì…ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ tagsë¡œ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ tagsëŠ” list ì…ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ë‚´ìš©ì—ì„œ íƒœê·¸ë¥¼ ì¶”ì¶œí•˜ì—¬ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]
    )

    #ê²°ê³¼
    result = response.choices[0].message.content
        
    print(json.loads(result))

##ì£¼ì œë¥¼ ë¶„ì„ í•´ë³´ì•„ìš” (ê°„ë‹¨ íƒœê·¸ ê²€ìƒ‰??)
def ë„ˆê°€ë¬´ì—‡ì„ì›í•˜ëŠ”ê²ƒì¸ì§€ì•Œì•„ì•¼ê² ë‹¤ (context):
    response = client.chat.completions.create(
        #gpt ëª¨ëŒˆ
        model="gpt-4o-mini",
        #ì‘ë‹µ í˜•ì‹
        response_format={ "type": "json_object" },
        #í”„ë¡¬í”„íŠ¸ ì‘ì„± í•˜ëŠ” ê³³
        messages=[
        #ì‘ë‹µ í˜•ì‹ ìš”êµ¬ ( ëŒ€í™” ë°©ì‹ ì§€ì • )
        {"role": "system", "content": "You are a helpful assistant designed to output JSON."},

        #ì£¼ë¬¸ì‚¬í•­
        {"role": "user", "content": "ì£¼ì–´ì§„ ë¬¸ì¥ì—ì„œ ì°¾ê³ ì í•˜ëŠ” ê²ƒì„ ìœ ì¶”í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ìœ ì¶”í•´ë‚¸ ê²ƒì€ íƒœê·¸ì™€ë„ ê°™ìŠµë‹ˆë‹¤."},
        {"role": "user", "content": "ëª¨ë“  íƒœê·¸ëŠ” ëª…ì‚¬ì…ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ tagsë¡œ í•©ë‹ˆë‹¤."},
        {"role": "user", "content": "ì‘ë‹µì€ tagsëŠ” list ì…ë‹ˆë‹¤."},

        #ë‹µë³€ ì œê³µ
        {"role": "assistant", "content": f"contextì— í¬í•¨ëœ ë‚´ìš©ì—ì„œ íƒœê·¸ë¥¼ ë§Œë“¤ì–´ ì‘ë‹µí•©ë‹ˆë‹¤. context:{context}"}
        ]
    )

    #ê²°ê³¼
    result = response.choices[0].message.content
        
    print(json.loads(result))

#ë³€í™˜(ê²€ì—´)í•  í…ìŠ¤íŠ¸

# trend_context = {
#     'title' : '',
#     'content' : 'ì• í”Œë®¤ì§ ì£¼ê°„ TOP 100 8ìœ„ (2/3) ì§€ê¸ˆê¹Œì§€ì˜ ìˆœìœ„ (2024ë…„ 7ì›” 22ì¼ - 12ì›” 30ì¼)\
#     8 - ? - 5 - 5 - 6 - 5 - 6 - 6 - 8 - 9 - 10 - 11 - 7 - 9 - 10 - 15 - 11 - 14 - 15 - 18 - 1 - 1 - 1 - 2 - \
#     2025ë…„ 1ì›” 6ì¼ - 2ì›” 3ì¼ í˜„ì¬ \
#     1 - 1 - 3 - 4 - 8 \
#     2024ë…„ 7ì›” 22ì¼ ìƒˆë¡œ ë‚˜ì˜¨ ì• í”Œ ë®¤ì§ í´ë˜ì‹œì»¬ ì°¨íŠ¸ì— ëŒ€í•´ì„œ: \
#     ì´ ì£¼ê°„ ì°¨íŠ¸ëŠ” 165ê°œ ì´ìƒì˜ êµ­ê°€ë¡œë¶€í„° ìˆ˜ì§‘í•œ Apple Music Classical ìŠ¤íŠ¸ë¦¬ë°, Apple Music ìŠ¤íŠ¸ë¦¬ë°, iTunes ë‹¤ìš´ë¡œë“œ, iTunes ê³¡ íŒë§¤ ë° Shazam íƒœê·¸ ë“± 5ê°€ì§€ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ê²°í•©í•´ í´ë˜ì‹ ìŒì•…ì˜ ìµœì‹  ë™í–¥ì„ ì¢…í•©ì ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤. \
#     í´ë˜ì‹ ì•¨ë²” TOP 100ì€ ë§¤ì£¼ ì›”ìš”ì¼ Apple Music Classical í™ˆ íƒ­ì—ì„œ ì—…ë°ì´íŠ¸ëœë‹¤. ê° ì°¨íŠ¸ì—ëŠ” ì „ì£¼ ê¸ˆìš”ì¼ë¶€í„° ëª©ìš”ì¼ê¹Œì§€ 1ì£¼ì¼ê°„ì˜ í™œë™ì´ ë°˜ì˜ëœë‹¤. \
#     4 \
#     ê³ ì •ë‹‰ 0 \
#     ì‹¤ë² ì¶”ê³µìœ ì‹ ê³ , ëŒ“ê¸€ : ',
# }


#í…ŒìŠ¤íŠ¸ìš© ì‹¤í–‰
###ë³€í™˜ê¸°
# rework_context = {
#     'title' : '',
#     'content' : 'ë‚˜í•˜ì•¼ë¼ ë„ë“œë³´í‚¤ ëŸ¼ê·¸ ê³ ê±°ì€ë†“ì–´ë„ ìƒëª©ëª… ì€ì½˜ì´ì¡° ëƒë‹ˆì•„ ê±°ë…¼í•´ê°€ì¶” ëŠ¥ê¸°ê²°ì—° ìŠ¤ìš°ë§ˆ ìš©ìƒ ê±ê± ìƒìš© ë§ˆìš°ìŠ¤ ì—°ê²°ê¸°ëŠ¥ ì¶”ê°€í•´ë…¼ê±° ì•„ë‹ˆëƒ ì¡°ì´ì½˜ì€ ëª…ëª©ìƒ ë„£ì–´ë†“ì€ê±°ê³  ê·¸ëŸ¼ í‚¤ë³´ë“œë„ ë¼ì•¼í•˜ë‚˜â€¦'
# }
# rework(context=rework_context)

### ì „ì²˜ë¦¬ v1 (ë‹¨ì–´ ë½‘ì•„ì„œ ì²˜ë¦¬ í›„ ë³€í™˜)
# finder_context = {
#     #'title' : 'dkssudgktpdy hello',
#     'content' : 'í¬ì¼“ëª¬ ìŠ¤ë°” ì´ ìƒˆë¼ í”„ë ˆì„ë°©ì–´ë˜ëŠ”ê±°ë§ì§€? '
# }

# #finder(context=finder_context)
# ì´ë¦„ì§“ê¸°ê·€ì°®ì€ë°ì•„ë¬´íŠ¼ì°¾ì•„ë‚¸ê³ ìœ ëª…ì‚¬ë‘ì›ë³¸ë¬¸ì¥ = finder(context=finder_context)
# content = pre_v1(ì›ë³¸ = ì´ë¦„ì§“ê¸°ê·€ì°®ì€ë°ì•„ë¬´íŠ¼ì°¾ì•„ë‚¸ê³ ìœ ëª…ì‚¬ë‘ì›ë³¸ë¬¸ì¥['context']['input'], ì´ê±°ì´ë¦„ë­˜ë¡œí• ê¹Œ = ì´ë¦„ì§“ê¸°ê·€ì°®ì€ë°ì•„ë¬´íŠ¼ì°¾ì•„ë‚¸ê³ ìœ ëª…ì‚¬ë‘ì›ë³¸ë¬¸ì¥['context']['words'])

# reworkd_context = {
#     'title' : '',
#     'content' : f'{content}'
# }
# rework(context=reworkd_context)


# ### ì „ì²˜ë¦¬ v2 (aiê°€ ë‹¤ í•¨)
# finder_context = {
#     #'title' : 'dkssudgktpdy hello',
#     'content' : 'hello dkssud ì•ˆë…•í•˜ì„¸ìš” ë©í•œì²­ì¸ì§€ê³µëŠ¥ í‘¸í•˜í•˜ dkssudgkek'
# }
# content = pre_v2(finder_context)

# reworkd_context = {
#     'title' : '',
#     'content' : f'{content}'
# }
# rework(context=reworkd_context)

###íƒœê·¸ë‚´ë†”
# tag_context = {
#     'content' : 'ê¸°íƒ€ì—°ì£¼ì— ë°˜í•´ë²„ë ¸ì–´ìš”... ğŸ˜California Dreamin by The Mamas &Papas ë„ì…ë¶€ë¶„ì— ë‚˜ì˜¤ëŠ” ê¸°íƒ€ì—°ì£¼ ë©œë¡œë””ê°€ ê¸°ê°€ë§‰íˆëŠ”ë° ì´ ê³¡ë„ í•œë²ˆ ì—°ì£¼í•´ì£¼ì‹¤ìˆ˜ ìˆë‚˜ìš”?'
# }
# hashtag(context=tag_context)

###ì´ê±°ì™œ ì´ë ‡ê²Œ ë§ì•„ì§€ëŠ”ê±´ì§€ ë„ˆë¬´ ë§ì€ë° ë‚˜ì¤‘ì—ì •ë¦¬í•´ì•¼ê² ë‹¤ ì£¼ì œíŒŒì•…í•˜ê¸°
title_context = {
    'content' : 'ìœ íŠœë¸Œì— ìì£¼ ë‚˜ì˜¤ëŠ” ë°œë¼ë“œ ë…¸ë˜ ê°€ìˆ˜'
}

ë„ˆê°€ë¬´ì—‡ì„ì›í•˜ëŠ”ê²ƒì¸ì§€ì•Œì•„ì•¼ê² ë‹¤(context=title_context)